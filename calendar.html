<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Custom Calendar - Month/Week/Day View</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        background: #f7f8fa;
        font-family: "Nunito", Arial, sans-serif;
        margin: 0;
        padding: 0;
      }
      .container {
        max-width: 1200px;
        margin: 32px auto;
        padding: 0 16px;
      }
      .calendar-header {
        font-size: 1.5rem;
        font-weight: 700;
        margin-bottom: 10px;
        margin-top: 0;
        letter-spacing: 0.5px;
      }
      .calendar-breadcrumb {
        color: #b0b4c3;
        font-size: 1rem;
        text-align: right;
        margin-bottom: 10px;
      }
      .calendar-breadcrumb span {
        color: #181c32;
        font-weight: 500;
      }
      .calendar-box {
        background: #fff;
        border-radius: 18px;
        box-shadow: 0 2px 24px 0 #e6eaf3;
        padding: 24px 24px 8px 24px;
      }
      .calendar-controls {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 16px;
        flex-wrap: wrap;
      }
      .nav-btn {
        background: #f5f7fa;
        border: none;
        border-radius: 8px;
        width: 38px;
        height: 38px;
        font-size: 1.3rem;
        color: #181c32;
        cursor: pointer;
        transition: background 0.2s;
      }
      .nav-btn:hover {
        background: #e6eaf3;
      }
      .add-btn {
        background: #407bff;
        color: #fff;
        font-weight: 500;
        border: none;
        border-radius: 8px;
        padding: 8px 20px;
        font-size: 1rem;
        margin-left: 8px;
        cursor: pointer;
        transition: background 0.2s;
      }
      .add-btn:hover {
        background: #265ed7;
      }
      .calendar-month {
        flex: 1;
        text-align: center;
        font-size: 1.2rem;
        font-weight: 600;
        color: #181c32;
        letter-spacing: 0.5px;
      }
      .view-toggle {
        background: #f5f7fa;
        border-radius: 10px;
        display: flex;
        align-items: center;
        padding: 2px;
        margin-left: 8px;
      }
      .view-toggle button {
        border: none;
        background: transparent;
        color: #b0b4c3;
        font-size: 1rem;
        padding: 7px 16px;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 500;
        transition: background 0.2s, color 0.2s;
      }
      .view-toggle button.active {
        background: #fff;
        color: #181c32;
      }
      .view-toggle button:disabled {
        color: #b0b4c3;
        cursor: not-allowed;
      }
      .calendar-table {
        width: 100%;
        border-collapse: collapse;
        background: #fff;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: none;
      }
      .calendar-table th,
      .calendar-table td {
        width: 14.28%;
        height: 90px;
        vertical-align: top;
        border: 1px solid #f0f1f5;
        position: relative;
        padding: 6px 5px 2px 12px;
        font-size: 1rem;
        background: #fff;
      }
      .calendar-table th {
        background: #f5f7fa;
        color: #7e8497;
        font-weight: 500;
        text-align: left;
        padding: 10px 0 10px 12px;
        border-bottom: 1.5px solid #e6eaf3;
      }
      .calendar-table td.today {
        background: #eaf1ff;
        border: 2px solid #407bff;
      }
      .calendar-table td.empty {
        background: #f7f8fa;
        border: none;
      }
      .event {
        display: flex;
        align-items: center;
        margin: 7px 0 0 0;
        padding: 6px 10px;
        border-radius: 9px;
        font-size: 0.97rem;
        font-weight: 500;
        color: #181c32;
        background: #f5f7fa;
        border-left: 5px solid #407bff;
        cursor: pointer;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        min-height: 28px;
        gap: 6px;
      }
      .event.meeting {
        border-left: 5px solid #7ed957;
        background: #eaffea;
      }
      .event.seminar {
        border-left: 5px solid #b3a0ff;
        background: #f2f0ff;
      }
      .event.conf {
        border-left: 5px solid #ff7e7e;
        background: #fff0f0;
      }
      .event.time {
        border-left: 5px solid #ffb347;
        background: #fff7ea;
      }
      .event.project {
        border-left: 5px solid #407bff;
        background: #eaf1ff;
      }
      .event:hover {
        opacity: 0.93;
      }
      .modal {
        display: none;
        position: fixed;
        z-index: 1000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background: rgba(0, 0, 0, 0.13);
      }
      .modal-content {
        background: #fff;
        margin: 7% auto;
        padding: 24px 32px;
        border-radius: 12px;
        width: 340px;
        box-shadow: 0 4px 32px #e6eaf3;
        position: relative;
      }
      .close {
        position: absolute;
        right: 18px;
        top: 16px;
        font-size: 1.5rem;
        color: #888;
        cursor: pointer;
      }
      #eventForm label {
        display: block;
        margin: 12px 0 7px 0;
        font-size: 1rem;
      }
      #eventForm input[type="text"],
      #eventForm input[type="date"],
      #eventForm input[type="time"] {
        width: 100%;
        padding: 7px 8px;
        border: 1px solid #e6eaf3;
        border-radius: 6px;
        font-size: 1rem;
        margin-bottom: 10px;
      }
      #eventForm button[type="submit"] {
        background: #407bff;
        color: #fff;
        border: none;
        border-radius: 7px;
        padding: 8px 18px;
        font-size: 1rem;
        cursor: pointer;
        margin-top: 8px;
      }
      /* Responsive */
      @media (max-width: 700px) {
        .calendar-table th,
        .calendar-table td {
          font-size: 0.8rem;
          padding: 2px 2px 2px 4px;
          height: 60px;
        }
        .calendar-box {
          padding: 8px 2px;
        }
      }
      /* Day view style */
      .day-view-table,
      .week-view-table {
        width: 100%;
        border-collapse: collapse;
        background: #fff;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: none;
      }
      .day-view-table th,
      .day-view-table td,
      .week-view-table th,
      .week-view-table td {
        border: 1px solid #f0f1f5;
        padding: 14px 16px;
        font-size: 1rem;
        background: #fff;
        text-align: left;
        min-width: 100px;
        vertical-align: top;
      }
      .day-view-table th,
      .week-view-table th {
        background: #f5f7fa;
        color: #7e8497;
        font-weight: 500;
        text-align: left;
      }
      .day-view-table td.today,
      .week-view-table td.today {
        background: #eaf1ff;
        border: 2px solid #407bff;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div
        style="
          display: flex;
          justify-content: space-between;
          align-items: center;
        "
      >
        <div class="calendar-header">Calendar</div>
        <div class="calendar-breadcrumb">Home &gt; <span>Calendar</span></div>
      </div>
      <div class="calendar-box">
        <div class="calendar-controls">
          <button id="prevBtn" class="nav-btn">&#60;</button>
          <button id="nextBtn" class="nav-btn">&#62;</button>
          <button id="addEventBtn" class="add-btn">Add Event +</button>
          <div class="calendar-month" id="monthYear"></div>
          <div class="view-toggle">
            <button id="monthViewBtn" class="active">month</button>
            <button id="weekViewBtn">week</button>
            <button id="dayViewBtn">day</button>
          </div>
        </div>
        <div id="calendarViews">
          <table class="calendar-table" id="monthTable">
            <thead>
              <tr>
                <th>SUN</th>
                <th>MON</th>
                <th>TUE</th>
                <th>WED</th>
                <th>THU</th>
                <th>FRI</th>
                <th>SAT</th>
              </tr>
            </thead>
            <tbody id="calendarBody"></tbody>
          </table>
          <table class="week-view-table" id="weekTable" style="display: none">
            <thead>
              <tr>
                <th>SUN</th>
                <th>MON</th>
                <th>TUE</th>
                <th>WED</th>
                <th>THU</th>
                <th>FRI</th>
                <th>SAT</th>
              </tr>
            </thead>
            <tbody id="weekBody"></tbody>
          </table>
          <table class="day-view-table" id="dayTable" style="display: none">
            <thead>
              <tr>
                <th id="dayHead"></th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td id="dayBody"></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <!-- Modal for adding event -->
    <div id="eventModal" class="modal">
      <div class="modal-content">
        <span class="close" id="closeModal">&times;</span>
        <h3>Add Event</h3>
        <form id="eventForm">
          <label>
            Title:
            <input type="text" id="eventTitle" required />
          </label>
          <label>
            Date:
            <input type="date" id="eventDate" required />
          </label>
          <label>
            Time (optional):
            <input type="time" id="eventTime" />
          </label>
          <button type="submit">Add</button>
        </form>
      </div>
    </div>
    <script>
      // ==== Calendar Data and Utilities ====
      const months = [
        "January",
        "February",
        "March",
        "April",
        "May",
        "June",
        "July",
        "August",
        "September",
        "October",
        "November",
        "December",
      ];

      let events = [
        { title: "Event Conf.", date: "2025-06-01", type: "conf" },
        { title: "Seminar #4", date: "2025-06-07", type: "seminar" },
        { title: "Seminar #4", date: "2025-06-08", type: "seminar" },
        {
          title: "4p Meeting #5",
          date: "2025-06-09",
          time: "16:00",
          type: "meeting",
        },
        { title: "Seminar #6", date: "2025-06-11", type: "seminar" },
        {
          title: "10:30a Meeting",
          date: "2025-06-12",
          time: "10:30",
          type: "meeting",
        },
        {
          title: "12p Meetup #",
          date: "2025-06-12",
          time: "12:00",
          type: "meeting",
        },
        {
          title: "2:30p Submissi",
          date: "2025-06-12",
          time: "14:30",
          type: "time",
        },
        {
          title: "7a Attend ever",
          date: "2025-06-13",
          time: "07:00",
          type: "meeting",
        },
        {
          title: "4p Submission",
          date: "2025-06-16",
          time: "16:00",
          type: "time",
        },
        { title: "Project submissi", date: "2025-06-28", type: "project" },
      ];

      // ==== Calendar State ====
      let today = new Date();
      let currentMonth = today.getMonth();
      let currentYear = today.getFullYear();
      let currentView = "month"; // month, week, day
      let selectedDay = today.getDate();
      let selectedMonth = currentMonth;
      let selectedYear = currentYear;

      // ==== DOM Elements ====
      const calendarBody = document.getElementById("calendarBody");
      const monthYear = document.getElementById("monthYear");
      const prevBtn = document.getElementById("prevBtn");
      const nextBtn = document.getElementById("nextBtn");
      const addEventBtn = document.getElementById("addEventBtn");
      const eventModal = document.getElementById("eventModal");
      const closeModal = document.getElementById("closeModal");
      const eventForm = document.getElementById("eventForm");
      const eventTitle = document.getElementById("eventTitle");
      const eventDate = document.getElementById("eventDate");
      const eventTime = document.getElementById("eventTime");
      const monthViewBtn = document.getElementById("monthViewBtn");
      const weekViewBtn = document.getElementById("weekViewBtn");
      const dayViewBtn = document.getElementById("dayViewBtn");
      const weekBody = document.getElementById("weekBody");
      const dayBody = document.getElementById("dayBody");
      const dayHead = document.getElementById("dayHead");
      const monthTable = document.getElementById("monthTable");
      const weekTable = document.getElementById("weekTable");
      const dayTable = document.getElementById("dayTable");

      // ==== Utility ====
      function formatDate(date) {
        return date.toISOString().slice(0, 10);
      }
      function getWeekStart(date) {
        let d = new Date(date);
        d.setDate(d.getDate() - d.getDay());
        return d;
      }
      function getWeekDates(date) {
        let start = getWeekStart(date);
        let arr = [];
        for (let i = 0; i < 7; i++) {
          let d = new Date(start);
          d.setDate(start.getDate() + i);
          arr.push(d);
        }
        return arr;
      }

      // ==== Render Functions ====
      function renderCalendar(month, year) {
        // Set month/year header
        monthYear.textContent = `${months[month]} ${year}`;
        // First day of month (0=Sun)
        const firstDay = new Date(year, month, 1).getDay();
        // Days in month
        const daysInMonth = new Date(year, month + 1, 0).getDate();

        let html = "";
        let date = 1;
        for (let i = 0; i < 6; i++) {
          // 6 weeks
          html += "<tr>";
          for (let j = 0; j < 7; j++) {
            if (i === 0 && j < firstDay) {
              html += "<td class='empty'></td>";
            } else if (date > daysInMonth) {
              html += "<td class='empty'></td>";
            } else {
              // Today's highlight
              let isToday =
                date === today.getDate() &&
                month === today.getMonth() &&
                year === today.getFullYear();
              let cellDate = `${year}-${String(month + 1).padStart(
                2,
                "0"
              )}-${String(date).padStart(2, "0")}`;
              html += `<td class="${
                isToday ? "today" : ""
              }" data-date="${cellDate}"><div>${date}</div>`;
              // Render events for this date
              events
                .filter((ev) => ev.date === cellDate)
                .forEach((ev, idx) => {
                  let typeClass = ev.type || "";
                  html += `<span class="event ${typeClass}" title="${ev.title}${
                    ev.time ? " @ " + ev.time : ""
                  }" data-idx="${cellDate}|${idx}">
                ${ev.title}${ev.time ? " @ " + ev.time : ""}
                <span style="margin-left:auto;cursor:pointer;font-size:1.1em;color:#b0b4c3;" class="del-event" title="Delete">&#x2715;</span>
              </span>`;
                });
              html += "</td>";
              date++;
            }
          }
          html += "</tr>";
          if (date > daysInMonth) break;
        }
        calendarBody.innerHTML = html;

        // Add delete event listeners
        document.querySelectorAll(".del-event").forEach((btn) => {
          btn.onclick = function (e) {
            e.stopPropagation();
            const key = btn.parentElement.getAttribute("data-idx");
            const [cellDate, idx] = key.split("|");
            let evs = events.filter((ev) => ev.date === cellDate);
            let globalIdx = events.indexOf(evs[parseInt(idx)]);
            if (globalIdx > -1) {
              events.splice(globalIdx, 1);
              renderCurrentView();
            }
          };
        });

        // Day/Week cell click for switching view
        document.querySelectorAll(".calendar-table td").forEach((td) => {
          td.onclick = function () {
            const d = td.getAttribute("data-date");
            if (!d) return;
            const [y, m, da] = d.split("-");
            selectedDay = parseInt(da);
            selectedMonth = parseInt(m) - 1;
            selectedYear = parseInt(y);
            if (currentView === "month") {
              renderDayView(selectedYear, selectedMonth, selectedDay);
              setView("day");
            }
          };
        });
      }

      function renderWeekView(year, month, day) {
        // Get week dates
        let refDate = new Date(year, month, day);
        let weekDates = getWeekDates(refDate);
        let html = "<tr>";
        weekDates.forEach((d) => {
          let isToday =
            d.getDate() === today.getDate() &&
            d.getMonth() === today.getMonth() &&
            d.getFullYear() === today.getFullYear();
          let cellDate = formatDate(d);
          html += `<td class="${
            isToday ? "today" : ""
          }" data-date="${cellDate}"><div>${d.getDate()}</div>`;
          events
            .filter((ev) => ev.date === cellDate)
            .forEach((ev, idx) => {
              let typeClass = ev.type || "";
              html += `<span class="event ${typeClass}" title="${ev.title}${
                ev.time ? " @ " + ev.time : ""
              }" data-idx="${cellDate}|${idx}">
            ${ev.title}${ev.time ? " @ " + ev.time : ""}
            <span style="margin-left:auto;cursor:pointer;font-size:1.1em;color:#b0b4c3;" class="del-event" title="Delete">&#x2715;</span>
          </span>`;
            });
          html += "</td>";
        });
        html += "</tr>";
        weekBody.innerHTML = html;

        // Header
        let weekStart = weekDates[0];
        let weekEnd = weekDates[6];
        monthYear.textContent = `${
          months[weekStart.getMonth()]
        } ${weekStart.getDate()}, ${weekStart.getFullYear()} - ${
          months[weekEnd.getMonth()]
        } ${weekEnd.getDate()}, ${weekEnd.getFullYear()}`;

        // Delete event listeners
        document.querySelectorAll(".del-event").forEach((btn) => {
          btn.onclick = function (e) {
            e.stopPropagation();
            const key = btn.parentElement.getAttribute("data-idx");
            const [cellDate, idx] = key.split("|");
            let evs = events.filter((ev) => ev.date === cellDate);
            let globalIdx = events.indexOf(evs[parseInt(idx)]);
            if (globalIdx > -1) {
              events.splice(globalIdx, 1);
              renderCurrentView();
            }
          };
        });

        // Day cell click for switching to day view
        document.querySelectorAll(".week-view-table td").forEach((td) => {
          td.onclick = function () {
            const d = td.getAttribute("data-date");
            if (!d) return;
            const [y, m, da] = d.split("-");
            selectedDay = parseInt(da);
            selectedMonth = parseInt(m) - 1;
            selectedYear = parseInt(y);
            renderDayView(selectedYear, selectedMonth, selectedDay);
            setView("day");
          };
        });
      }

      function renderDayView(year, month, day) {
        let d = new Date(year, month, day);
        dayHead.textContent = `${months[month]} ${day}, ${year}`;
        let cellDate = formatDate(d);
        let html = "";
        events
          .filter((ev) => ev.date === cellDate)
          .forEach((ev, idx) => {
            let typeClass = ev.type || "";
            html += `<span class="event ${typeClass}" title="${ev.title}${
              ev.time ? " @ " + ev.time : ""
            }" data-idx="${cellDate}|${idx}">
          ${ev.title}${ev.time ? " @ " + ev.time : ""}
          <span style="margin-left:auto;cursor:pointer;font-size:1.1em;color:#b0b4c3;" class="del-event" title="Delete">&#x2715;</span>
        </span>`;
          });
        if (!html)
          html = "<div style='color:#b0b4c3;'>No events for this day.</div>";
        dayBody.innerHTML = html;
        monthYear.textContent = `${months[month]} ${day}, ${year}`;

        // Delete event listeners
        document.querySelectorAll(".del-event").forEach((btn) => {
          btn.onclick = function (e) {
            e.stopPropagation();
            const key = btn.parentElement.getAttribute("data-idx");
            const [cellDate, idx] = key.split("|");
            let evs = events.filter((ev) => ev.date === cellDate);
            let globalIdx = events.indexOf(evs[parseInt(idx)]);
            if (globalIdx > -1) {
              events.splice(globalIdx, 1);
              renderCurrentView();
            }
          };
        });
      }

      function renderCurrentView() {
        if (currentView === "month") {
          renderCalendar(currentMonth, currentYear);
          monthTable.style.display = "";
          weekTable.style.display = "none";
          dayTable.style.display = "none";
        } else if (currentView === "week") {
          renderWeekView(selectedYear, selectedMonth, selectedDay);
          monthTable.style.display = "none";
          weekTable.style.display = "";
          dayTable.style.display = "none";
        } else if (currentView === "day") {
          renderDayView(selectedYear, selectedMonth, selectedDay);
          monthTable.style.display = "none";
          weekTable.style.display = "none";
          dayTable.style.display = "";
        }
      }

      function setView(view) {
        currentView = view;
        // Toggle buttons
        monthViewBtn.classList.toggle("active", view === "month");
        weekViewBtn.classList.toggle("active", view === "week");
        dayViewBtn.classList.toggle("active", view === "day");
        renderCurrentView();
      }

      // ==== Event Listeners ====
      prevBtn.onclick = () => {
        if (currentView === "month") {
          currentMonth--;
          if (currentMonth < 0) {
            currentMonth = 11;
            currentYear--;
          }
          renderCalendar(currentMonth, currentYear);
        } else if (currentView === "week" || currentView === "day") {
          let d = new Date(selectedYear, selectedMonth, selectedDay);
          d.setDate(d.getDate() - (currentView === "week" ? 7 : 1));
          selectedYear = d.getFullYear();
          selectedMonth = d.getMonth();
          selectedDay = d.getDate();
          if (currentView === "week")
            renderWeekView(selectedYear, selectedMonth, selectedDay);
          else renderDayView(selectedYear, selectedMonth, selectedDay);
        }
      };
      nextBtn.onclick = () => {
        if (currentView === "month") {
          currentMonth++;
          if (currentMonth > 11) {
            currentMonth = 0;
            currentYear++;
          }
          renderCalendar(currentMonth, currentYear);
        } else if (currentView === "week" || currentView === "day") {
          let d = new Date(selectedYear, selectedMonth, selectedDay);
          d.setDate(d.getDate() + (currentView === "week" ? 7 : 1));
          selectedYear = d.getFullYear();
          selectedMonth = d.getMonth();
          selectedDay = d.getDate();
          if (currentView === "week")
            renderWeekView(selectedYear, selectedMonth, selectedDay);
          else renderDayView(selectedYear, selectedMonth, selectedDay);
        }
      };
      addEventBtn.onclick = () => {
        eventModal.style.display = "block";
        eventForm.reset();
        let d =
          currentView === "month"
            ? new Date(currentYear, currentMonth, today.getDate())
            : new Date(selectedYear, selectedMonth, selectedDay);
        eventDate.value = formatDate(d);
      };
      closeModal.onclick = () => {
        eventModal.style.display = "none";
      };
      window.onclick = function (event) {
        if (event.target === eventModal) eventModal.style.display = "none";
      };
      eventForm.onsubmit = function (e) {
        e.preventDefault();
        let title = eventTitle.value.trim();
        let date = eventDate.value;
        let time = eventTime.value;
        let type = "meeting";
        if (title.toLowerCase().includes("seminar")) type = "seminar";
        else if (title.toLowerCase().includes("conf")) type = "conf";
        else if (
          title.toLowerCase().includes("submission") ||
          title.toLowerCase().includes("submissi")
        )
          type = "time";
        else if (title.toLowerCase().includes("project")) type = "project";
        events.push({ title, date, time: time || undefined, type });
        eventModal.style.display = "none";
        renderCurrentView();
      };

      monthViewBtn.onclick = () => {
        setView("month");
      };
      weekViewBtn.onclick = () => {
        // week of selected day
        setView("week");
      };
      dayViewBtn.onclick = () => {
        setView("day");
      };

      // ==== Initialize ====
      renderCalendar(currentMonth, currentYear);
    </script>
  </body>
</html>
